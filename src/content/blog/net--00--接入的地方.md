---
title: net--00--接入的地方
author: daz
pubDatetime: 2024-02-01T11:22:13Z
featured: false
draft: false
tags:
  - Linux network
  - networking
ogImage: ""
description: "network-00"
---

![](https://img-blog.csdnimg.cn/img_convert/54e60afdf2764a07539da3136f3ce3e4.png)
本作品采用[知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议](https://creativecommons.org/licenses/by-nc-sa/4.0/)进行许可。

---

## pre

- 干一行爱一行,今天开始好好学网络
  ![](https://pic1.zhimg.com/80/v2-2d62ba265be486cb94ab531912aa3b9c_1440w.webp)

## 接入网络

### 设备

- 最原始: 分线器
  - 工作在物理层
  - 我们宿舍只有一个网线口,也就是不借助外部设备的话只能有一台`电脑/路由器`连接网络,但因为分线器的存在,我们可以共享接入运营商的网络,大家都有的玩
- 集线器
  - 工作在物理层
  - 无智能,只负责将某一个端口输入进来的数据全部转发给其他端口(广播模式)
  - 共享带宽,效率低,且容易造成混乱,需要控制`多路访问`
    - 这一问题需要在数据链路层中的 MAC(Medium Access Control) 子层进行控制,以太网中使用控制方法是随机接入协议
      - 以太网是局域网的一种最经典实现
- 二层设备: 交换机
  - 二层,也就是数据链路层,定义为`通过物理层连接的两个节点之间的数据帧传输`
  - 能够根据 MAC 地址来决定要转发的端口,避免拥堵
  - 交换机上会有一个转发表,用来记录 IP-MAC 映射,当然其中的数据都会过期
  - 多个交换机连接的拓扑结构会产生 `环/(图)`, 将图中的环使用`最小生成树 -- STP 算法`破坏后就可以产生树,破坏会导致错误的环,使交换机之间产生等级.
    - STP 需要的计算量较大,可能会使环的收敛时间变长,所以很难 hold 住大型网络架构,STP 是一种经典实现,但现在用的已经较少了
  - 一个组织内多个部门间交换机广播信号的安全问题
    - 需要使用隔离来规避,隔离方法分两种
      - 物理隔离: 单独的部门使用单独的交换机
      - 虚拟隔离: `VLan`,在 MAC 报文里加一个 Tag 来表示归属的 VLAN,只有相同 VLAN 的包，才会互相转发，不同 VLAN 的包，是看不到的.
        - 虚拟隔离中,交换机之间的连接靠 Trunk 口/ Access 口/ 混合口
- 三层设备: 路由器
  - 三层,也就是网络层,定义为`构建和管理多节点网络，包括寻址、路由和流量控制`
  - 连接到来自不同 IP 网络的两条或多条数据线路.当数据包进入其中一条线路时,路由器会读取数据包标头中的网络地址信息来确定最终目的地.
    - 然后使用其路由表或路由策略中的信息,将数据包定向到其旅程中的下一步(下一个路由器或终点终端)

### MAC

- Medium Access Control, 数据链路层中的一个子层
- 控制在往 medium 上发数据的时候,谁先发/后发的问题,防止发生混乱
- MAC 地址
  - 类似于身份证号, 局域网内代表一张唯一网卡
  - 理论上说每个网卡都有唯一的 MAC 号,但其可以被篡改,所以要确保当前局域网内设备 MAC 号无冲突
  - IP 地址就像是快递地址,找设备的就是就是通过"快递地址"来找到"小区",在小区中`大喊`"身份证号"来找到具体的设备
    - 这里说的大喊就是 ARP, ARP 的作用就是在局域网内通过 IP 地址找到对应的 MAC 号,然后将包发给具体的设备
    - RARP
      - 通过 MAC 地址寻找对应的 IP 地址
      - 一个用例: 可以用来通过网卡指定 IP,针对无盘系统,建立网卡和 IP 的映射,即可为该计算机分配 IP 地址
